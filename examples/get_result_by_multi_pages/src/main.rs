use fofa;
use tokio;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let client = fofa::FofaClient {
        key : "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".to_string(),    //xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
        fields : "host,ip,port,domain,server,os".to_string(),
        query_string: "domain=apple.com".to_string(),
        size: 10,
    };
    let mut count = 0;
    let response = client.get_selected_pages(2,10).await.unwrap();  //Vec<Vec<String>>，也可以拿去使用client.get_lines切片
    for inner_vec in &response{
        for item in inner_vec{
            print!("{}, ",item);
        }
        println!();
    }
    Ok(())
}
/* Output_Sample:
    https://mwp15-st14-ssl.ls.apple.com,17.167.200.82,443,apple.com,,,
    images.apple.com,106.4.158.58,80,apple.com,Apple,,
    https://mwp9-st14-ssl.ls.apple.com,17.167.200.84,443,apple.com,,,
    https://apay-partner-api-lt-bz.apple.com,17.32.208.79,443,apple.com,Apple,,
    apay-partner-api-lt-bz.apple.com,17.32.208.79,80,apple.com,Apple,,
    https://entitlements.podcasts.apple.com,17.8.152.105,443,apple.com,daiquiri/5,,
    https://entitlements.books.apple.com,17.8.152.135,443,apple.com,daiquiri/5,,
    https://entitlements.music.apple.com,17.8.152.105,443,apple.com,daiquiri/5,,
    entitlements.apps.apple.com,17.8.152.135,80,apple.com,daiquiri/5,,
    https://entitlements.podcastsconnect.apple.com,17.8.152.174,443,apple.com,daiquiri/5,,
    entitlements.podcastsconnect.apple.com,17.8.152.105,80,apple.com,daiquiri/5,,
    entitlements.podcasts.apple.com,17.8.152.135,80,apple.com,daiquiri/5,,
    entitlements.music.apple.com,17.8.152.135,80,apple.com,daiquiri/5,,
    https://entitlements.apps.apple.com,17.8.152.174,443,apple.com,daiquiri/5,,
    entitlements.books.apple.com,17.8.152.105,80,apple.com,daiquiri/5,,
    entitlements.tv.apple.com,17.8.152.174,80,apple.com,daiquiri/5,,
    https://entitlements.tv.apple.com,17.8.152.174,443,apple.com,daiquiri/5,,
    musicstatus.tv.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    musicstatus.apps.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    musicstatus.podcastsconnect.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    https://musicstatus.podcastsconnect.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    musicstatus.podcasts.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://buylite.podcasts.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    musicstatus.music.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    entitlements-edge.apps.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    https://entitlements-edge.podcastsconnect.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    entitlements-edge.music.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    entitlements-edge.podcastsconnect.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    entitlements-edge.tv.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    https://musicstatus.tv.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    buylite.apps.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://musicstatus.books.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    https://speedysub.books.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    speedysub.podcasts.apple.com,17.8.155.208,80,apple.com,daiquiri/5,,
    https://speedysub.link.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    https://buylite.tv.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    entitlements-edge.podcasts.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://speedysub.apps.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    musicstatus.books.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://speedysub.tv.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    https://entitlements-edge.tv.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    https://buylite.apps.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    buylite.podcasts.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    buylite.tv.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    https://buylite.music.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    https://musicstatus.apps.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    speedysub.music.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://buylite.link.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    speedysub.link.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://musicstatus.podcasts.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    buylite.music.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    https://buylite.books.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    buylite.link.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    https://musicstatus.music.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    https://entitlements-edge.apps.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    https://speedysub.podcastsconnect.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    https://buylite.podcastsconnect.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    https://speedysub.podcasts.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    buylite.podcastsconnect.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    speedysub.podcastsconnect.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    speedysub.tv.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://entitlements-edge.books.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    buylite.books.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    speedysub.books.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    https://speedysub.music.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    speedysub.apps.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://entitlements-edge.music.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    entitlements-edge.books.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    https://entitlements-edge.podcasts.apple.com,17.8.155.208,443,apple.com,daiquiri/5,,
    https://entitlements.itunes.apple.com,17.8.152.174,443,apple.com,daiquiri/5,,
    buylite.itunes.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://buylite.itunes.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    https://musicstatus.itunes.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    https://fpinit.itunes.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    https://entitlements-edge.itunes.apple.com,17.8.156.30,443,apple.com,daiquiri/5,,
    https://speedysub.itunes.apple.com,17.8.155.249,443,apple.com,daiquiri/5,,
    entitlements.itunes.apple.com,17.8.152.174,80,apple.com,daiquiri/5,,
    fpinit.itunes.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    entitlements-edge.itunes.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    speedysub.itunes.apple.com,17.8.156.30,80,apple.com,daiquiri/5,,
    musicstatus.itunes.apple.com,17.8.155.249,80,apple.com,daiquiri/5,,
    https://play-edge.itunes.apple.com,2.22.241.42,443,apple.com,daiquiri/5,,
    desktop-music-legacy.itunes.apple.com,113.125.199.66,80,apple.com,QTL_Cache/1.2.15,,
    atve.tv.apple.com,23.1.100.27,80,apple.com,daiquiri/5,,
    https://uts-api-siri.itunes.apple.com,59.151.138.106,443,apple.com,daiquiri/5,,
    https://vocabulary.itunes.apple.com,23.1.100.27,443,apple.com,AkamaiGHost,,
    uts-api-siri.itunes.apple.com,23.1.100.27,80,apple.com,daiquiri/5,,
    https://sb.music.apple.com,23.1.100.27,443,apple.com,daiquiri/5,,
    vocabulary.itunes.apple.com,23.77.214.22,80,apple.com,AkamaiGHost,,
    sb.music.apple.com,23.1.100.27,80,apple.com,daiquiri/5,,
*/